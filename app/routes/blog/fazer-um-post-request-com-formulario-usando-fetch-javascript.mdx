---
title: Fazer um POST com FetchApi e FormData
date: 2022-11-09
meta:
    title: Fazer um POST com FetchApi e FormData
    description: Como fazer um POST usando FetchApi e FormData
---

## Como fazer um POST usando Fetch Api e FormData

#### Case - Voc√™ tem um formul√°rio html e deseja enviar, atrav√©s do m√©todo POST, os dados que o seu usu√°rio inputou, para um servidor que vai receber esses dados e fazer a persist√™ncia.

### Para simular tal cen√°rio, vamos precisar de:

1. Um formul√°rio HTML simples;
2. Javascript puro Fetch Api e FormData;
3. Uma api de testes, chamada REQRES de URL 'https://reqres.in/';

## Primeiro passo - montar o HTML com o nosso formul√°rio

```html
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fazer um POST com FetchApi e FormData</title>
</head>
<body>
    <form class="form" id="formulario">
        <input name="usuario" type="text" placeholder="usuario">
        <input name="senha" type="password" placeholder="senha">
        <input name="checkbox" type="checkbox">

        <button type="submit">Enviar</button>
    </form>
</body>
</html>
```

Que resultar√° em:

![Screenshot do output - colorido](https://res.cloudinary.com/igorvenancio-com/image/upload/v1668131060/Blog/visualizacao_html_okb84d.jpg)

√â um formul√°rio bem simples como voc√™ pode ver, mas que vai nos ajudar a entender todo o processo.

**Com nosso formul√°rio pronto, agora vamos nos dedicar ao javascript.**

Primeiro vamos capturar o elemento formul√°rio, colocando-o em uma vari√°vel, usando o m√©todo
getElemenyById e passando, entre aspas, o Id desse elemento :
```js
const formEl = document.getElemenyById('formulario')
```
Agora que temos o nosso elemento capturado, vamos chamar o m√©todo addEventListener para pedir ao javascript
que fa√ßa algo quando um certo evento acontecer nesse elemento. 

#### No nosso caso, qual evento? Submit. Fazer o que? Enviar os dados do formul√°rio para o servidor via POST.


Precisamos agora criar um objeto do tipo **FormData**, passando o nosso elemento formul√°rio como par√¢metro, pois usaremos ele logo em seguida.
```js
formEl.addEventListener('submit', event => {
    event.preventDefault();
    
    const formData = new FormData(formularioEl) 
                                                
```

√â necess√°rio fazer assim para conseguirmos, de maneira simples, coletar os valores de cada input do formul√°rio. 

#### Executando o console.log(formData), temos:
![](https://res.cloudinary.com/igorvenancio-com/image/upload/v1668131060/Blog/print_do_formData_gqjjuy.jpg)

Agora vamos usar o m√©todo fromEntries do Object, que recebe como par√¢metro um objeto FormData **(olha ele ai!)** e retorna
todos os valores que est√£o em cada input desse formul√°rio.
```js
    const data = Object.fromEntries(formData);
                                                                                                
})
```

Mais uma vez, usando o console.log(data) para visualizarmos o que tem nessa vari√°vel, podemos ver que esse m√©todo criou um objeto usando o placeholder de cada input como chave e o value como valor dessa chave.
![](https://res.cloudinary.com/igorvenancio-com/image/upload/v1668131060/Blog/print_ObjectFromEntries_jopdpj.jpg)

E agora falta s√≥ chamar o m√©todo fetch, escolhendo o m√©todo de requisi√ß√£o POST,
especificando no headers que o tipo do conte√∫do da requisi√ß√£o √© json e,
obviamente, transformando esses dados em JSON e os enviando no body.

```js
fetch('https://reqres.in/api/users', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
})
    .then(res => res.json())
    .then(data => console.log(data))
    .catch(error => console.log(error))
```

**E pronto!**

Ao digitar o nome de usu√°rio, senha, marcar ou n√£o o checkbox e clicar no bot√£o 'Enviar', nosso client faz essa requisi√ß√£o para o servidor, que retorna 201, pois essa requisi√ß√£o
foi satisfeita e um novo recurso foi criado, como podemos ver nos prints abaixo:

![](https://res.cloudinary.com/igorvenancio-com/image/upload/v1668131060/Blog/resposta_servidor_201_ozmczc.jpg)

O console do browser:
![](https://res.cloudinary.com/igorvenancio-com/image/upload/v1668131060/Blog/retorno_servidor_zron68.jpg)

Espero que esse post tenha sido √∫til para voc√™! üëç

Um abra√ßo,
Igor Venancio


<div lg:flex>
  <img
    style={{marginLeft:'auto', marginRight:'auto'}}
    width="250" height="250"
    src="https://c.tenor.com/gK9Yd_xrxrIAAAAC/yoda-star-wars.gif" />
<img
    style={{marginLeft:'auto', marginRight:'auto'}}
    width="250" height="250"
    src="https://c.tenor.com/UwbYxIzEPpwAAAAC/teach-you-yoda.gif" />
</div>


Caso voc√™ queira **assistir** esse conte√∫do, [clique aqui](https://youtu.be/b1RpvU3Z0rM), √© um v√≠deo meu mostrando como fazer.

Obs.: **Compartilhe** com algu√©m que se beneficiaria ao aprender esse conte√∫do.
Obs¬≤.: o c√≥digo completo est√° no [GitHub](https://github.com/venancioigor/formDataPost)

